<!-- Firebase-Bibliotheken einbinden -->
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
  apiKey: "AIzaSyBjn0biBBwfG8TyMhFPyPgqspHZPK846ts",
  authDomain: "punkteapp-94a9c.firebaseapp.com",
  projectId: "punkteapp-94a9c",
  storageBucket: "punkteapp-94a9c.firebasestorage.app",
  messagingSenderId: "970130888345",
  appId: "1:970130888345:web:d82545cf67a24951270a08"
};
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // Login-Funktion (für Kind & Admin)
  function login(email, password) {
    auth.signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;
        // Rolle des Users aus der Datenbank holen und entsprechend weiterleiten
        if(user.role === 'admin') {
          showAdminView();
        } else {
          showChildView();
        }
      })
      .catch((error) => alert("Login fehlgeschlagen: " + error.message));
  }

  // Aufgabe hinzufügen (nur Admin)
  function addTask(taskTitle, points) {
    const user = auth.currentUser;
    if (user && user.role === 'admin') {
      db.collection('tasks').add({
        title: taskTitle,
        points: points,
        assignedTo: 'max', // oder gewähltes Kind
        completed: false
      });
    }
  }

  // Aufgabe als erledigt markieren (Kind)
  function completeTask(taskId) {
    const user = auth.currentUser;
    db.collection('tasks').doc(taskId).update({completed: true});
    // Punkte dem Kind in der Datenbank gutschreiben
    db.collection('users').doc(user.uid).update({
      points: firebase.firestore.FieldValue.increment(taskPoints)
    });
  }
</script>